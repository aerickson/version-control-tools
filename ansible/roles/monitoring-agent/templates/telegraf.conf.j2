# General telegraf stuff
[agent]
logfile = "/var/log/telegraf/telegraf.log"
debug = true

# Enable the cpu plugin
[[inputs.cpu]]
percpu = true
totalcpu = true

# Enable the Disk input plugin
[[inputs.disk]]
mount_points = [
  "/",
  "/repo/hg/mozilla",
]

# Enable the DiskIO input plugin
[[inputs.diskio]]

# Enable the Mem input plugin
[[inputs.mem]]

# Enable the Net input plugin
[[inputs.net]]

# Enable the Processes input plugin
[[inputs.processes]]

# Enable the System input plugin
[[inputs.system]]

# Send metrics to InfluxDB
[[outputs.influxdb]]
urls = ["http://10.191.5.155:8086"]

{% if hosttype == "hgweb" %}
{% include 'hgweb.conf.j2' %}
{% else if hosttype == 'hgssh' %}
{% include 'hgssh.conf.j2' %}
{% endif %}
